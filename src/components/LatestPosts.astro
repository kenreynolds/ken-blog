---
import { Icon } from "astro-icon";

const allPosts = await Astro.glob('../pages/posts/*.md');
const recentPosts = allPosts.slice(0, 3);
---

<div class="w-full">
  <section class="mx-auto pb-24 px-12 pt-12 w-full lg:w-3/4 lg:px-0">
    <h2 class="font-semibold text-2xl text-primary m-0 pb-8 border-0">
      Check out my latest thoughts:
    </h2>

    <div class="flex flex-col px-0 lg:mb-0">
      {recentPosts.map(post =>
        <div class="card border-b-2 border-primary mb-12 last:mb-0 last:mr-0 px-4 pb-4 lg:mr-6">
          <div class="border-b-1 border-slate-500">
            <div class="flex-col text-left mb-4">
              <h3 class="font-semibold text-xl">
                {post.frontmatter.title}
              </h3>
              <p class="text-sm">
                Posted on {post.frontmatter.pubDate.slice(0, 10)}
              </p>
            </div>
            <p>{post.frontmatter.description}</p>
            <div class="flex justify-end mt-4">
              <a class="text-accent" href={post.url}>
                <div class="flex items-center hover:underline hover:underline-offset-2">
                  Read more <Icon class="h-6 w-6 pt-0.5" name="pixelarticons:chevron-right" />
                </div>
              </a>
            </div>
          </div>
        </div>
      )}
    </div>
  </section>
</div>