---
import { Icon } from "astro-icon";

const allPosts = await Astro.glob('../pages/posts/*.md');
const recentPosts = allPosts.slice(0, 3);
---

<section class="pb-6 pl-0 pr-6 pt-12 w-full md:pb-24 md:w-5/6">
  <h2 class="bg-primary font-semibold text-2xl text-base-100
    m-0 mb-8 px-4 py-2 border-0 rounded
  ">Check out my latest thoughts:
  </h2>

  <div class="flex flex-col px-0 lg:mb-0">
    {recentPosts.map(post =>
      <div class="card border-b-2 border-primary mb-12 pb-4 px-4
        last:mb-0 last:mr-0
      ">
        <div class="border-b-1 border-slate-500">
          <div class="flex-col text-left mb-4">
            <h3 class="font-semibold text-xl">
              {post.frontmatter.title}
            </h3>
            <p class="text-sm">
              Posted on {post.frontmatter.pubDate.slice(0, 10)}
            </p>
          </div>
          <p>{post.frontmatter.description}</p>
          <div class="flex justify-end mt-4">
            <a class="text-accent" href={post.url}>
              <div class="flex items-center hover:underline hover:underline-offset-2">
                Read more <Icon class="h-6 w-6 pt-0.5" name="pixelarticons:chevron-right" />
              </div>
            </a>
          </div>
        </div>
      </div>
    )}
  </div>
</section>